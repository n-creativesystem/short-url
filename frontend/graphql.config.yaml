schema:
  - ../schema/graphql/*.graphql
documents:
  - src/components/**/*.graphql
  # - src/graphql/queries/**/*.graphql
  # - src/graphql/mutations/**/*.graphql
  # - src/graphql/fragments/**/*.graphql
extensions:
  codegen:
    overwrite: true
    generates:
      src/types/graphql/index.d.ts:
        plugins:
          - add:
              content: '// Code generated by graphql-codegen. DO NOT EDIT.'
          - add:
              content: 'export type CustomTime = string & { __timeBrand: any };'
          - add:
              content: 'export type CustomURL = URL & { __CustomURLBrand: any };'
          - typescript
        config:
          withHooks: true
          scalars:
            Time: CustomTime
            URL: CustomURL
      src/:
        plugins:
          - typescript
          - typescript-operations # query, mutationから型を作成
          - typescript-react-apollo # query, mutationからhooks, hocを作成
        preset: near-operation-file
        presetConfig:
          extension: .tsx
          baseTypesPath: types/graphql
        config:
          withHooks: true
          scalars:
            Time: Types.CustomTime
            URL: Types.CustomURL
    hooks:
      afterOneFileWrite:
        - prettier --write
